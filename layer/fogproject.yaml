# METABEGIN
# X-Env-Layer-Name: fogproject
# X-Env-Layer-Category: suite
# X-Env-Layer-Desc: FOG Project.
# X-Env-Layer-Requires: systemd-net-min
#
# X-Env-VarPrefix: fogproject
#
# X-Env-Var-overlay: ${DIRECTORY}/fogproject-overlay
# X-Env-Var-overlay-Desc: Directory holding filesystem assets.
# X-Env-Var-overlay-Required: n
# X-Env-Var-overlay-Valid: string
# X-Env-Var-overlay-Set: y
# METAEND
---
mmdebstrap:
  packages:
    - apache2
    - build-essential
    - cpp
    - curl
    - g++
    - gawk
    - gcc
    - gcc-aarch64-linux-gnu
    - genisoimage
    - git
    - gzip
    - htmldoc
    - isc-dhcp-server
    - isolinux
    - lftp
    - libapache2-mod-fastcgi
    - libapache2-mod-php
    - libc6
    - libcurl3
    - liblzma-dev
    - m4
    - mysql-client
    - mysql-server
    - net-tools
    - nfs-kernel-server
    - openssh-server
    - php-fpm
    - php
    - php-cli
    - php-curl
    - php-gd
    - php-json
    - php-ldap
    - php-mbstring
    - php-mysql
    - php-mysqlnd
    - tar
    - tftpd-hpa
    - tftp-hpa
    - vsftpd
    - wget
    - zlib1g
  customize-hooks:
    - install -D -m 0755 "${IGconf_fogproject_overlay}/usr/sbin/installfog.sh" "$1/usr/sbin/installfog.sh"
    - install -D -m 0644 --backup "${IGconf_fogproject_overlay}/etc/systemd/network/01-eth0.network" "$1/etc/systemd/network/01-eth0.network"
    - install -D -m 0644 "${IGconf_fogproject_overlay}/etc/systemd/system/installfog.service" "$1/etc/systemd/system/installfog.service"
    - $BDEBSTRAP_HOOKS/enable-units "$1" installfog.service
